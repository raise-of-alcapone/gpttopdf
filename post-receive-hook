#!/bin/bash
# post-receive hook for automatic deployment
# Place this in your git repository's hooks folder on the server

set -e

APP_DIR="/opt/gpttopdf"
BRANCH="main"

echo "ðŸ”„ Deployment started..."

# Navigate to application directory
cd $APP_DIR

# Reset any local changes and pull latest
git --git-dir=$APP_DIR/.git --work-tree=$APP_DIR fetch origin
git --git-dir=$APP_DIR/.git --work-tree=$APP_DIR reset --hard origin/$BRANCH

# Restart application (choose one method)

# For Docker:
docker-compose build --no-cache
docker-compose down
docker-compose up -d

# For systemd:
# sudo systemctl restart gpttopdf

echo "âœ… Deployment completed!"
